---
title:  "An Interactive Scatterplot Using Observables"
execute:
  echo: false
---

## Introduction

It is not hard to learn to use [Observables](https://observablehq.com) to perform data anlysis and prodcue interactive graphs like the one shown below.

If you would like to enhance your project website with Observables, give it a try!  Setting up an account is free.

## The Plot

The plot below is based on data from the 2005 Cherry Blossom Race.  For documentation see [here](https://rdrr.io/cran/mosaicData/man/TenMileRace.html).

The user can choose the sex of the runners plotted, and the opacity of the points.  (The latter feature is useful, as over-plotting is an issue in this dataset.)


```{ojs}
race = FileAttachment("TenMileRace.csv").csv({typed: true})
```


```{ojs}
//| output: false
race.forEach(function(runner) {runner.timeMinutes = runner.time / 60;})
```


```{ojs}
minTime = d3.min(d3.map(race, d => d.timeMinutes))
```

```{ojs}
maxTime = d3.max(d3.map(race, d => d.timeMinutes))
```

```{ojs}
minAge = d3.min(d3.map(race, d => d.age))
```

```{ojs}
maxAge = d3.max(d3.map(race, d => d.age))
```
    
    





```{ojs}
//| panel: input
viewof sex = Inputs.select(["F", "M"], {label: "Sex of runner: "})
viewof opacity = Inputs.range([0, 1], {label: "Opacity: ", step: 0.01})
```





```{ojs}
Plot.plot({
  inset: 8,
  grid: true,
  marks: [
    Plot.dot(
      d3.filter(race, d => d.sex == sex), 
      {x: "age", y: "timeMinutes", fill: "black", fillOpacity: opacity}
    )
  ],
  x: {domain: [minAge, maxAge]},
  y: {label: "time (minutes)", domain: [minTime, maxTime]},
})
```


**Note**:  This work was first done as a [Notebook](https://observablehq.com/d/1664118c11075582) on the [Observable](https://observablehq.com) site.  It is often easiest to do one's development there, then transfer the code to Quarto for publication.